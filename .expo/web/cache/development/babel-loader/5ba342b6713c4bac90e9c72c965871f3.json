{"ast":null,"code":"import _defineProperty2 from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty2(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport { isFunction, isOneOf } from \"../common\";\nimport { NativeError } from \"../internal/NativeError\";\nimport { AdEventType } from \"../AdEventType\";\nimport { RewardedAdEventType } from \"../RewardedAdEventType\";\nimport { GAMAdEventType } from \"../GAMAdEventType\";\nimport { validateAdShowOptions } from \"../validateAdShowOptions\";\nexport var MobileAd = function () {\n  function MobileAd(type, googleMobileAds, requestId, adUnitId, requestOptions) {\n    var _this = this;\n\n    _classCallCheck(this, MobileAd);\n\n    _defineProperty(this, \"_type\", void 0);\n\n    _defineProperty(this, \"_googleMobileAds\", void 0);\n\n    _defineProperty(this, \"_requestId\", void 0);\n\n    _defineProperty(this, \"_adUnitId\", void 0);\n\n    _defineProperty(this, \"_requestOptions\", void 0);\n\n    _defineProperty(this, \"_loaded\", void 0);\n\n    _defineProperty(this, \"_isLoadCalled\", void 0);\n\n    _defineProperty(this, \"_adEventsListeners\", void 0);\n\n    _defineProperty(this, \"_adEventListenersMap\", void 0);\n\n    _defineProperty(this, \"_adEventsListenerId\", void 0);\n\n    _defineProperty(this, \"_adEventListenerId\", void 0);\n\n    _defineProperty(this, \"_nativeListener\", void 0);\n\n    this._type = type;\n    this._googleMobileAds = googleMobileAds;\n    this._requestId = requestId;\n    this._adUnitId = adUnitId;\n    this._requestOptions = requestOptions;\n    this._loaded = false;\n    this._isLoadCalled = false;\n    this._adEventsListeners = new Map();\n    this._adEventListenersMap = new Map();\n    Object.values(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, AdEventType), RewardedAdEventType), GAMAdEventType), {}, {\n      _: AdEventType.LOADED\n    })).forEach(function (type) {\n      _this._adEventListenersMap.set(type, new Map());\n    });\n    this._adEventListenerId = 0;\n    this._adEventsListenerId = 0;\n    this._nativeListener = googleMobileAds.emitter.addListener(\"google_mobile_ads_\" + type + \"_event:\" + adUnitId + \":\" + requestId, this._handleAdEvent.bind(this));\n  }\n\n  _createClass(MobileAd, [{\n    key: \"_handleAdEvent\",\n    value: function _handleAdEvent(event) {\n      var _event$body = event.body,\n          type = _event$body.type,\n          error = _event$body.error,\n          data = _event$body.data;\n\n      if (type === AdEventType.LOADED || type === RewardedAdEventType.LOADED) {\n        this._loaded = true;\n      }\n\n      if (type === AdEventType.CLOSED) {\n        this._loaded = false;\n        this._isLoadCalled = false;\n      }\n\n      var payload = data;\n\n      if (error) {\n        payload = NativeError.fromEvent(error, 'googleMobileAds');\n      }\n\n      this._adEventsListeners.forEach(function (listener) {\n        listener({\n          type: type,\n          payload: payload\n        });\n      });\n\n      this._getAdEventListeners(type).forEach(function (listener) {\n        listener(payload);\n      });\n    }\n  }, {\n    key: \"_addAdEventsListener\",\n    value: function _addAdEventsListener(listener) {\n      var _this2 = this;\n\n      if (!isFunction(listener)) {\n        throw new Error(this._className + \".addAdEventsListener(*) 'listener' expected a function.\");\n      }\n\n      var id = this._adEventsListenerId++;\n\n      this._adEventsListeners.set(id, listener);\n\n      return function () {\n        _this2._adEventsListeners.delete(id);\n      };\n    }\n  }, {\n    key: \"_addAdEventListener\",\n    value: function _addAdEventListener(type, listener) {\n      var _this3 = this;\n\n      if (!(isOneOf(type, Object.values(AdEventType)) || isOneOf(type, Object.values(RewardedAdEventType)) && (this._type === 'rewarded' || this._type === 'rewarded_interstitial'))) {\n        throw new Error(this._className + \".addAdEventListener(*) 'type' expected a valid event type value.\");\n      }\n\n      if (!isFunction(listener)) {\n        throw new Error(this._className + \".addAdEventListener(_, *) 'listener' expected a function.\");\n      }\n\n      var id = this._adEventListenerId++;\n\n      this._getAdEventListeners(type).set(id, listener);\n\n      return function () {\n        _this3._getAdEventListeners(type).delete(id);\n      };\n    }\n  }, {\n    key: \"_getAdEventListeners\",\n    value: function _getAdEventListeners(type) {\n      return this._adEventListenersMap.get(type);\n    }\n  }, {\n    key: \"_className\",\n    get: function get() {\n      return this.constructor.name;\n    }\n  }, {\n    key: \"_camelCaseType\",\n    get: function get() {\n      var type;\n\n      if (this._type === 'app_open') {\n        type = 'appOpen';\n      } else if (this._type === 'rewarded_interstitial') {\n        type = 'rewardedInterstitial';\n      } else {\n        type = this._type;\n      }\n\n      return type;\n    }\n  }, {\n    key: \"load\",\n    value: function load() {\n      if (this._loaded || this._isLoadCalled) {\n        return;\n      }\n\n      this._isLoadCalled = true;\n      var load = this._googleMobileAds.native[this._camelCaseType + \"Load\"];\n      load(this._requestId, this._adUnitId, this._requestOptions);\n    }\n  }, {\n    key: \"show\",\n    value: function show(showOptions) {\n      if (!this._loaded) {\n        throw new Error(this._className + \".show() The requested \" + this._className + \" has not loaded and could not be shown.\");\n      }\n\n      var options;\n\n      try {\n        options = validateAdShowOptions(showOptions);\n      } catch (e) {\n        if (e instanceof Error) {\n          throw new Error(this._className + \".show(*) \" + e.message + \".\");\n        } else {\n          throw e;\n        }\n      }\n\n      var show = this._googleMobileAds.native[this._camelCaseType + \"Show\"];\n      return show(this._requestId, this._adUnitId, options);\n    }\n  }, {\n    key: \"removeAllListeners\",\n    value: function removeAllListeners() {\n      this._adEventsListeners.clear();\n\n      this._adEventListenersMap.forEach(function (_, type, map) {\n        map.set(type, new Map());\n      });\n    }\n  }, {\n    key: \"adUnitId\",\n    get: function get() {\n      return this._adUnitId;\n    }\n  }, {\n    key: \"loaded\",\n    get: function get() {\n      return this._loaded;\n    }\n  }]);\n\n  return MobileAd;\n}();","map":{"version":3,"mappings":"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","names":["isFunction","isOneOf","NativeError","AdEventType","RewardedAdEventType","GAMAdEventType","validateAdShowOptions","MobileAd","constructor","type","googleMobileAds","requestId","adUnitId","requestOptions","_defineProperty","_type","_googleMobileAds","_requestId","_adUnitId","_requestOptions","_loaded","_isLoadCalled","_adEventsListeners","Map","_adEventListenersMap","Object","values","_","LOADED","forEach","set","_adEventListenerId","_adEventsListenerId","_nativeListener","emitter","addListener","_handleAdEvent","bind","event","body","error","data","CLOSED","payload","fromEvent","listener","_getAdEventListeners","_addAdEventsListener","Error","_className","id","delete","_addAdEventListener","get","name","load","native","_camelCaseType","show","showOptions","options","e","message","removeAllListeners","clear","map"],"sources":["MobileAd.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-present Invertase Limited & Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this library except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { EmitterSubscription } from 'react-native';\nimport { isFunction, isOneOf } from '../common';\nimport { NativeError } from '../internal/NativeError';\nimport { AdEventType } from '../AdEventType';\nimport { RewardedAdEventType } from '../RewardedAdEventType';\nimport { AdEventListener, AdEventPayload } from '../types/AdEventListener';\nimport { AdEventsListener } from '../types/AdEventsListener';\nimport { AdShowOptions } from '../types/AdShowOptions';\nimport { RequestOptions } from '../types/RequestOptions';\nimport { MobileAdInterface } from '../types/MobileAd.interface';\nimport { MobileAdsModuleInterface } from '../types/MobileAdsModule.interface';\nimport { RewardedAdReward } from '../types/RewardedAdReward';\nimport { GAMAdEventType } from '../GAMAdEventType';\nimport { AppEvent } from '../types/AppEvent';\nimport { validateAdShowOptions } from '../validateAdShowOptions';\n\ntype EventType = AdEventType | RewardedAdEventType | GAMAdEventType;\n\nexport abstract class MobileAd implements MobileAdInterface {\n  protected _type: 'app_open' | 'interstitial' | 'rewarded' | 'rewarded_interstitial';\n  protected _googleMobileAds: MobileAdsModuleInterface;\n  protected _requestId: number;\n  protected _adUnitId: string;\n  protected _requestOptions: RequestOptions;\n  protected _loaded: boolean;\n  protected _isLoadCalled: boolean;\n  protected _adEventsListeners: Map<number, AdEventsListener<EventType>>;\n  protected _adEventListenersMap: Map<EventType, Map<number, AdEventListener<EventType>>>;\n  protected _adEventsListenerId: number;\n  protected _adEventListenerId: number;\n  protected _nativeListener: EmitterSubscription;\n\n  protected constructor(\n    type: 'app_open' | 'interstitial' | 'rewarded' | 'rewarded_interstitial',\n    googleMobileAds: MobileAdsModuleInterface,\n    requestId: number,\n    adUnitId: string,\n    requestOptions: RequestOptions,\n  ) {\n    this._type = type;\n    this._googleMobileAds = googleMobileAds;\n    this._requestId = requestId;\n    this._adUnitId = adUnitId;\n    this._requestOptions = requestOptions;\n\n    this._loaded = false;\n    this._isLoadCalled = false;\n    this._adEventsListeners = new Map();\n    this._adEventListenersMap = new Map();\n    Object.values({\n      ...AdEventType,\n      ...RewardedAdEventType,\n      ...GAMAdEventType,\n      _: AdEventType.LOADED, // since AdEventType.LOADED is overwritten by RewardedAdEventType.LOADED\n    }).forEach(type => {\n      this._adEventListenersMap.set(type as EventType, new Map());\n    });\n    this._adEventListenerId = 0;\n    this._adEventsListenerId = 0;\n\n    this._nativeListener = googleMobileAds.emitter.addListener(\n      `google_mobile_ads_${type}_event:${adUnitId}:${requestId}`,\n      this._handleAdEvent.bind(this),\n    );\n  }\n\n  protected _handleAdEvent(event: {\n    body: {\n      type: EventType;\n      error?: { code: string; message: string };\n      data?: RewardedAdReward | AppEvent;\n    };\n  }) {\n    const { type, error, data } = event.body;\n\n    if (type === AdEventType.LOADED || type === RewardedAdEventType.LOADED) {\n      this._loaded = true;\n    }\n\n    if (type === AdEventType.CLOSED) {\n      this._loaded = false;\n      this._isLoadCalled = false;\n    }\n\n    let payload: AdEventPayload<EventType> = data;\n    if (error) {\n      payload = NativeError.fromEvent(error, 'googleMobileAds');\n    }\n    this._adEventsListeners.forEach(listener => {\n      listener({\n        type,\n        payload,\n      });\n    });\n    this._getAdEventListeners(type).forEach(listener => {\n      listener(payload);\n    });\n  }\n\n  protected _addAdEventsListener<T extends EventType>(listener: AdEventsListener<T>) {\n    if (!isFunction(listener)) {\n      throw new Error(`${this._className}.addAdEventsListener(*) 'listener' expected a function.`);\n    }\n\n    const id = this._adEventsListenerId++;\n    this._adEventsListeners.set(id, listener as AdEventsListener<EventType>);\n    return () => {\n      this._adEventsListeners.delete(id);\n    };\n  }\n\n  protected _addAdEventListener<T extends EventType>(type: T, listener: AdEventListener<T>) {\n    if (\n      !(\n        isOneOf(type, Object.values(AdEventType)) ||\n        (isOneOf(type, Object.values(RewardedAdEventType)) &&\n          (this._type === 'rewarded' || this._type === 'rewarded_interstitial'))\n      )\n    ) {\n      throw new Error(\n        `${this._className}.addAdEventListener(*) 'type' expected a valid event type value.`,\n      );\n    }\n    if (!isFunction(listener)) {\n      throw new Error(\n        `${this._className}.addAdEventListener(_, *) 'listener' expected a function.`,\n      );\n    }\n\n    const id = this._adEventListenerId++;\n    this._getAdEventListeners(type).set(id, listener);\n    return () => {\n      this._getAdEventListeners(type).delete(id);\n    };\n  }\n\n  protected _getAdEventListeners<T extends EventType>(type: T) {\n    return this._adEventListenersMap.get(type) as Map<number, AdEventListener<T>>;\n  }\n\n  protected get _className() {\n    return this.constructor.name;\n  }\n\n  protected get _camelCaseType() {\n    let type: 'appOpen' | 'interstitial' | 'rewarded' | 'rewardedInterstitial';\n    if (this._type === 'app_open') {\n      type = 'appOpen';\n    } else if (this._type === 'rewarded_interstitial') {\n      type = 'rewardedInterstitial';\n    } else {\n      type = this._type;\n    }\n    return type;\n  }\n\n  public load() {\n    // Prevent multiple load calls\n    if (this._loaded || this._isLoadCalled) {\n      return;\n    }\n\n    this._isLoadCalled = true;\n    const load = this._googleMobileAds.native[`${this._camelCaseType}Load`];\n    load(this._requestId, this._adUnitId, this._requestOptions);\n  }\n\n  public show(showOptions?: AdShowOptions) {\n    if (!this._loaded) {\n      throw new Error(\n        `${this._className}.show() The requested ${this._className} has not loaded and could not be shown.`,\n      );\n    }\n\n    let options;\n    try {\n      options = validateAdShowOptions(showOptions);\n    } catch (e) {\n      if (e instanceof Error) {\n        throw new Error(`${this._className}.show(*) ${e.message}.`);\n      } else {\n        throw e;\n      }\n    }\n\n    const show = this._googleMobileAds.native[`${this._camelCaseType}Show`];\n    return show(this._requestId, this._adUnitId, options);\n  }\n\n  public abstract addAdEventsListener<T extends never>(listener: AdEventsListener<T>): () => void;\n\n  public abstract addAdEventListener<T extends never>(type: T, listener: AdEventListener<T>): void;\n\n  public removeAllListeners() {\n    this._adEventsListeners.clear();\n    this._adEventListenersMap.forEach((_, type, map) => {\n      map.set(type, new Map());\n    });\n  }\n\n  public get adUnitId() {\n    return this._adUnitId;\n  }\n\n  public get loaded() {\n    return this._loaded;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}